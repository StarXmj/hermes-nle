<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Administration | Hermes by NLE</title>
  
  <!-- 1. On charge le script de Decap dans le <head> -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
</head>
<body>
  <!-- 
    2. ON INITIALISE LE CMS MANUELLEMENT DANS LE <body>
    Cela corrige l'erreur "appendChild" ET l'erreur "config".
    Le script est déjà chargé, et le <body> existe.
  -->
  <script>
    CMS.init({
      config: {
        
        // -----------------------------
        // NOTRE CONFIGURATION EN JS
        // -----------------------------
        backend: {
          name: "git-gateway" // On utilise le Git Gateway de Netlify
        },
        
        media_folder: "public/images/uploads",
        public_folder: "/images/uploads",
        
        collections: [
          {
            name: "actions",
            label: "Actions",
            files: [
              {
                label: "Toutes les Actions",
                name: "actions",
                file: "src/data/actions.json",
                fields: [
                  {label: "Titre", name: "titre", widget: "string"},
                  {label: "Date (Texte)", name: "infoPratique", widget: "string"},
                  {label: "Date (ISO)", name: "dateISO", widget: "date"},
                  {label: "Lieu", name: "lieu", widget: "string"},
                  {label: "Lien Google Maps", name: "lienLieu", widget: "string"},
                  {label: "Description", name: "description", widget: "text"},
                  {label: "Lien Programme", name: "lienProgramme", widget: "string"}
                ]
              }
            ]
          },
          {
            name: "partenaires",
            label: "Partenaires",
            files: [
              {
                label: "Tous les Partenaires",
                name: "partenaires",
                file: "src/data/partenaires.json",
                fields: [
                  {label: "Nom", name: "nom", widget: "string"},
                  {label: "Logo (chemin)", name: "logo", widget: "string"},
                  {label: "Description", name: "description", widget: "text"},
                  {label: "Lien Google Maps", name: "lienAdresse", widget: "string"},
                  {label: "Lien Site Web", name: "lienSite", widget: "string"}
                ]
              }
            ]
          },
          {
            name: "actus",
            label: "Actualités",
            files: [
              {
                label: "Toutes les Actualités",
                name: "actus",
                file: "src/data/actus.json",
                fields: [
                  {label: "Titre", name: "titre", widget: "string"},
                  {label: "Date (ISO)", name: "dateISO", widget: "date"},
                  {label: "Catégorie", name: "categorie", widget: "select", options: ["Fac", "Pau"]},
                  {label: "Description", name: "description", widget: "text"},
                  {label: "Image (chemin)", name: "image", widget: "string"},
                  {label: "Lien Externe", name: "lien", widget: "string"},
                  {label: "Épinglé ?", name: "isPinned", widget: "boolean", default: false}
                ]
              }
            ]
          }
        ]
        // -----------------------------
        // FIN DE LA CONFIGURATION
        // -----------------------------
      }
    });
  </script>
</body>
</html>

